"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[9741],{27493:(e,t,i)=>{i.d(t,{A:()=>c});var n=i(40834),a=i(6934);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function d(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return l(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var _n=0,n=function(){};return{s:n,n:function(){return _n>=e.length?{done:!0}:{done:!1,value:e[_n++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,d=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){d=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(d)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c={name:"BulkEditionModal",components:{TainacanText:(0,a.$V)((function(){return Promise.all([i.e(554),i.e(4066)]).then(i.bind(i,11685))})),TainacanTextarea:(0,a.$V)((function(){return i.e(9588).then(i.bind(i,37207))})),TainacanSelectbox:(0,a.$V)((function(){return i.e(5724).then(i.bind(i,93343))})),TainacanNumeric:(0,a.$V)((function(){return i.e(2832).then(i.bind(i,60451))})),TainacanDate:(0,a.$V)((function(){return Promise.all([i.e(554),i.e(2888)]).then(i.bind(i,40507))})),TainacanRelationship:(0,a.$V)((function(){return Promise.all([i.e(4152),i.e(600)]).then(i.bind(i,98219))})),TainacanTaxonomy:(0,a.$V)((function(){return Promise.all([i.e(4561),i.e(7158)]).then(i.bind(i,14777))})),TainacanCompound:(0,a.$V)((function(){return Promise.all([i.e(9734),i.e(9370)]).then(i.bind(i,56989))})),TainacanUser:(0,a.$V)((function(){return i.e(7290).then(i.bind(i,24909))})),TainacanGeocoordinate:(0,a.$V)((function(){return Promise.all([i.e(5218),i.e(8061),i.e(5008),i.e(420)]).then(i.bind(i,29863))})),TainacanUrl:(0,a.$V)((function(){return i.e(2144).then(i.bind(i,39763))}))},props:{modalTitle:String,totalItems:Number,objectType:String,selectedForBulk:Object,collectionId:[String,Number]},emits:["close"],data:function(){return{editionCriteria:[1],editionActions:{add:this.$i18n.get("add_value"),redefine:this.$i18n.get("set_new_value"),replace:this.$i18n.get("replace_value"),remove:this.$i18n.get("remove_a_value"),clear:this.$i18n.get("clear_values"),copy:this.$i18n.get("copy_value")},bulkEditionProcedures:{1:{isDone:!1,isExecuting:!1,totalItemsEditedWithSuccess:0,tooltipShow:!0}},groupId:null,dones:[!1],metadataIsLoading:!1,metadataSearchCancel:void 0,selectedUserId:"",users:[],isFetchingUsers:!1,usersPage:1,usersPerPage:10,usersTotal:0,usersTotalPages:0,usersSearch:""}},computed:u({},(0,n.L8)("metadata",{metadata:"getMetadata"})),created:function(){var e=this;this.collectionId&&(this.metadataIsLoading=!0,null!=this.metadataSearchCancel&&this.metadataSearchCancel.cancel("Metadata search Canceled."),this.fetchMetadata({collectionId:this.collectionId,isRepositoryLevel:!1,isContextEdit:!0,includeDisabled:!1,parent:"any"}).then((function(t){t.request.then((function(){e.metadataIsLoading=!1})).catch((function(){e.metadataIsLoading=!1})),e.metadataSearchCancel=t.source})).catch((function(){return e.metadataIsLoading=!1}))),this.createEditGroup({object:this.selectedForBulk,collectionId:this.collectionId?this.collectionId:"default"}).then((function(){e.groupId=e.getGroupId()}))},mounted:function(){this.$refs.bulkEditionModal&&this.$refs.bulkEditionModal.focus()},beforeUnmount:function(){null!=this.metadataSearchCancel&&this.metadataSearchCancel.cancel("Metadata search Canceled.")},methods:u(u(u(u(u({},(0,n.L8)("bulkedition",["getGroupId"])),(0,n.i0)("bulkedition",["createEditGroup","setValueInBulk","clearValuesInBulk","addValueInBulk","replaceValueInBulk","redefineValueInBulk","setStatusInBulk","setAuthorIdInBulk","setCommentStatusInBulk","removeValueInBulk","copyValuesInBulk"])),(0,n.i0)("metadata",["fetchMetadata"])),(0,n.i0)("activity",["fetchUsers"])),{},{finalizeProcedure:function(e){Object.assign(this.bulkEditionProcedures[e],{isDone:!0}),this.dones[this.editionCriteria.indexOf(e)]=!0,Object.assign(this.bulkEditionProcedures[e],{isExecuting:!1})},executeBulkEditionProcedure:function(e){var t=this,i=this.bulkEditionProcedures[e];i.action===this.editionActions.redefine?(Object.assign(this.bulkEditionProcedures[e],{isExecuting:!0}),"status"===i.metadatum.id?this.setStatusInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{value:i.newValue}}).then((function(){t.finalizeProcedure(e)})):"author_id"===i.metadatum.id?this.setAuthorIdInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{value:i.newValue}}).then((function(){t.finalizeProcedure(e)})):"comments"===i.metadatum.id?this.setCommentStatusInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{value:i.newValue}}).then((function(){t.finalizeProcedure(e)})):this.setValueInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{metadatum_id:i.metadatum.id,value:i.newValue}}).then((function(){t.finalizeProcedure(e)}))):i.action===this.editionActions.add?(Object.assign(this.bulkEditionProcedures[e],{isExecuting:!0}),this.addValueInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{metadatum_id:i.metadatum.id,value:i.newValue}}).then((function(){t.finalizeProcedure(e)}))):i.action===this.editionActions.replace?(Object.assign(this.bulkEditionProcedures[e],{isExecuting:!0}),this.replaceValueInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{metadatum_id:i.metadatum.id,old_value:i.oldValue,new_value:i.newValue}}).then((function(){t.finalizeProcedure(e)}))):i.action===this.editionActions.remove?(Object.assign(this.bulkEditionProcedures[e],{isExecuting:!0}),this.removeValueInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{metadatum_id:i.metadatum.id,value:i.newValue}}).then((function(){t.finalizeProcedure(e)}))):i.action===this.editionActions.clear?(Object.assign(this.bulkEditionProcedures[e],{isExecuting:!0}),this.clearValuesInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{metadatum_id:i.metadatum.id}}).then((function(){t.finalizeProcedure(e)}))):i.action===this.editionActions.copy&&(Object.assign(this.bulkEditionProcedures[e],{isExecuting:!0}),this.copyValuesInBulk({collectionId:this.collectionId,groupId:this.groupId,bodyParams:{metadatum_id_to:parseInt(i.metadatum.id),metadatum_id_from:i.metadatumIdCopyFrom}}).then((function(){t.finalizeProcedure(e)})))},addEditionCriterion:function(){var e=Math.floor(999*Math.random())+2;null==this.editionCriteria.find((function(t){return t==e}))?(this.editionCriteria.push(e),this.bulkEditionProcedures=Object.assign({},this.bulkEditionProcedures,s({},"".concat(e),{isDone:!1,isExecuting:!1,totalItemsEditedWithSuccess:0,tooltipShow:!0})),this.dones.push(!1)):this.addEditionCriterion()},removeThis:function(e){var t=this.editionCriteria.findIndex((function(t){return t==e}));this.editionCriteria[t]&&(this.editionCriteria.splice(t,1),delete this.bulkEditionProcedures[e],this.dones.splice(t,1))},getValidEditionActions:function(e){for(var t=JSON.parse(JSON.stringify(this.editionActions)),i=0,n=Object.keys(this.editionActions);i<n.length;i++){var a=n[i];if("yes"==e.multiple||"add"!=a&&"replace"!=a&&"remove"!=a)if("status"!=e.id&&"author_id"!=e.id&&"comments"!=e.id||"clear"!=a&&"copy"!=a){if("copy"==a&&e.metadata_type_object)(this.metadata.findIndex((function(t){return t.id!=e.id&&t.metadata_type_object.component==e.metadata_type_object.component&&t.parent<=0}))<0&&"tainacan-user"!=e.metadata_type_object.component||e.parent>0)&&delete t[a]}else delete t[a];else delete t[a]}return t},getAllowedMetadataForCopy:function(e){if(this.bulkEditionProcedures[e]&&this.bulkEditionProcedures[e].metadatum&&this.bulkEditionProcedures[e].action&&this.bulkEditionProcedures[e].action==this.editionActions.copy){var t=this.bulkEditionProcedures[e].metadatum;if(t.metadata_type_object&&t.metadata_type)return JSON.parse(JSON.stringify(this.metadata)).filter((function(e){return e.id!=t.id&&e.metadata_type==t.metadata_type&&("yes"==t.multiple||"yes"!=e.multiple&&"yes"!=t.multiple)}))}return[]},addToBulkEditionProcedures:function(e,t,i){Array.isArray(e)&&(e=e[0]),Object.assign(this.bulkEditionProcedures[i],s({},"".concat(t),e)),"metadatum"===t&&this.bulkEditionProcedures[i].metadatum&&1===Object.values(this.getValidEditionActions(this.bulkEditionProcedures[i].metadatum)).length&&Object.assign(this.bulkEditionProcedures[i],{action:Object.values(this.getValidEditionActions(this.bulkEditionProcedures[i].metadatum))[0]})},fetchUsersForAuthor:_.debounce((function(e){var t=this;e!=this.usersSearch&&(this.usersSearch=e,this.users=[],this.usersPage=1),e.length||(this.usersSearch=e,this.users=[],this.usersPage=1),this.usersPage>1&&this.users.length>this.totalUsers||(this.isFetchingUsers=!0,this.fetchUsers({search:this.usersSearch,page:this.usersPage}).then((function(e){if(e.users){var i,n=d(e.users);try{for(n.s();!(i=n.n()).done;){var a=i.value;t.users.push(a)}}catch(e){n.e(e)}finally{n.f()}}e.totalUsers&&(t.totalUsers=e.totalUsers),t.usersPage++,t.isFetchingUsers=!1})).catch((function(e){t.$console.error(e),t.isFetchingUsers=!1})))}),500),fetchMoreUsersForAuthor:_.debounce((function(){this.fetchUsersForAuthor(this.usersSearch)}),250)})}},87919:(e,t,i)=>{i.d(t,{X:()=>Q});var n=i(6934),a={ref:"bulkEditionModal","aria-labelledby":"alert-dialog-title",autofocus:"",role:"alertdialog",tabindex:"-1","aria-modal":"",class:"tainacan-modal-content this-tainacan-modal-content"},o={class:"tainacan-modal-title"},d={class:"tainacan-total-objects-info"},l={class:"tainacan-form"},r={class:"modal-card-body no-overflow-modal-card-body"},u=["value"],s=["label"],c=["value"],m=["label"],p={value:{id:"status"}},b={value:{id:"author_id"}},h={value:{id:"comments"}},f=["value"],k={key:0,style:{"margin-left":"12px",display:"flex"}},g={class:"tainacan-bulk-edition-field tainacan-bulk-edition-field-not-last tainacan-by-text"},y=["value"],E={class:"media"},v={key:0,class:"media-left"},P=["src"],_={class:"media-content"},I=["value"],C=["value"],w=["label"],x=["value"],j={key:0,value:"created_by"},S=["onClick"],V={class:"icon"},$=["onMouseover"],A={class:"icon"},X=["disabled","onClick"],F={class:"icon"},O={key:3},L=["disabled"],U={class:"field is-grouped form-submit"},B={class:"control"},T=["disabled"],D={class:"control"},M=["disabled"];function Q(e,t,i,Q,z,K){var W=(0,n.g2)("b-select"),N=(0,n.g2)("b-autocomplete"),G=(0,n.gN)("tooltip");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("header",o,[(0,n.Lk)("h2",null,[(0,n.eW)((0,n.v_)(i.modalTitle)+" ",1),(0,n.Lk)("small",d,(0,n.v_)("(".concat(i.totalItems," ").concat(i.objectType,")")),1)]),t[4]||(t[4]=(0,n.Lk)("hr",null,null,-1))]),(0,n.Lk)("div",l,[(0,n.Lk)("div",r,[(0,n.bF)(n.F,{name:"filter-item"},{default:(0,n.k6)((function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(z.editionCriteria,(function(i){return(0,n.uX)(),(0,n.CE)("div",{key:i,class:"tainacan-bulk-edition-inline-fields"},[(0,n.bF)(W,{loading:z.metadataIsLoading,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone,"hidden-select-arrow":!!z.bulkEditionProcedures[i].metadatum},"tainacan-bulk-edition-field tainacan-bulk-edition-field-not-last"]),disabled:!!z.bulkEditionProcedures[i].metadatum||z.metadataIsLoading,placeholder:e.$i18n.get("instruction_select_a_metadatum"),"inherit-attrs":"false","onUpdate:modelValue":function(e){return K.addToBulkEditionProcedures(e,"metadatum",i)}},{default:(0,n.k6)((function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.metadata,(function(e,t){return(0,n.uX)(),(0,n.CE)(n.FK,{key:t},[e.id&&"tainacan-compound"!==e.metadata_type_object.component&&e.parent<=0?((0,n.uX)(),(0,n.CE)("option",{key:0,value:e},(0,n.v_)(e.name),9,u)):(0,n.Q3)("",!0),e.id&&"tainacan-compound"===e.metadata_type_object.component&&"yes"!==e.multiple?((0,n.uX)(),(0,n.CE)("optgroup",{key:1,label:e.name},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.metadata_type_options.children_objects,(function(e,t){return(0,n.uX)(),(0,n.CE)(n.FK,{key:t},[e.id?((0,n.uX)(),(0,n.CE)("option",{key:0,value:e},(0,n.v_)(e.name),9,c)):(0,n.Q3)("",!0)],64)})),128))],8,s)):(0,n.Q3)("",!0)],64)})),128)),(0,n.Lk)("optgroup",{label:e.$i18n.get("label_publication_data")},[(0,n.Lk)("option",p,(0,n.v_)(e.$i18n.get("label_status")),1),(0,n.Lk)("option",b,(0,n.v_)(e.$i18n.get("label_authorship")),1),(0,n.Lk)("option",h,(0,n.v_)(e.$i18n.get("label_allow_comments")),1)],8,m)]})),_:2},1032,["loading","class","disabled","placeholder","onUpdate:modelValue"]),(0,n.bF)(W,{class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone,"hidden-select-arrow":!!z.bulkEditionProcedures[i].action},"tainacan-bulk-edition-field tainacan-bulk-edition-field-not-last"]),disabled:!!z.bulkEditionProcedures[i].action||!z.bulkEditionProcedures[i].metadatum,"model-value":z.bulkEditionProcedures[i].action?z.bulkEditionProcedures[i].action:void 0,placeholder:e.$i18n.get("instruction_select_a_action"),"onUpdate:modelValue":function(e){return K.addToBulkEditionProcedures(e,"action",i)}},{default:(0,n.k6)((function(){return[z.bulkEditionProcedures[i].metadatum?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(K.getValidEditionActions(z.bulkEditionProcedures[i].metadatum),(function(e,t){return(0,n.uX)(),(0,n.CE)("option",{key:t,value:e},(0,n.v_)(e),9,f)})),128)):(0,n.Q3)("",!0)]})),_:2},1032,["class","disabled","model-value","placeholder","onUpdate:modelValue"]),(0,n.bF)(n.eB,{name:"filter-item"},{default:(0,n.k6)((function(){return[z.bulkEditionProcedures[i]&&z.bulkEditionProcedures[i].metadatum&&z.bulkEditionProcedures[i].action?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[z.bulkEditionProcedures[i].action==z.editionActions.replace?((0,n.uX)(),(0,n.CE)("div",k,[((0,n.uX)(),(0,n.Wv)((0,n.$y)(z.bulkEditionProcedures[i].metadatum.metadata_type_object.component),{"forced-component-type":z.bulkEditionProcedures[i].metadatum.metadata_type_object.component.includes("taxonomy")?"tainacan-taxonomy-tag-input":"","item-metadatum":{metadatum:z.bulkEditionProcedures[i].metadatum},"allow-new":!1,maxtags:1,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone},"tainacan-bulk-edition-field"]),disabled:z.bulkEditionProcedures[i].isDone,"onUpdate:value":function(e){return K.addToBulkEditionProcedures(e,"oldValue",i)}},null,40,["forced-component-type","item-metadatum","class","disabled","onUpdate:value"])),(0,n.Lk)("div",g,[(0,n.Lk)("small",null,(0,n.v_)(e.$i18n.get("info_by_inner")),1)]),((0,n.uX)(),(0,n.Wv)((0,n.$y)(z.bulkEditionProcedures[i].metadatum.metadata_type_object.component),{"forced-component-type":z.bulkEditionProcedures[i].metadatum.metadata_type_object.component.includes("taxonomy")?"tainacan-taxonomy-tag-input":"","item-metadatum":{metadatum:z.bulkEditionProcedures[i].metadatum},"allow-new":!1,maxtags:1,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone},"tainacan-bulk-edition-field tainacan-bulk-edition-field-not-last"]),disabled:z.bulkEditionProcedures[i].isDone,"onUpdate:value":function(e){return K.addToBulkEditionProcedures(e,"newValue",i)}},null,40,["forced-component-type","item-metadatum","class","disabled","onUpdate:value"]))])):"status"==z.bulkEditionProcedures[i].metadatum.id?((0,n.uX)(),(0,n.Wv)(W,{key:1,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone,"hidden-select-arrow":z.bulkEditionProcedures[i].isDone},"tainacan-bulk-edition-field tainacan-bulk-edition-field-last"]),disabled:z.bulkEditionProcedures[i].isDone,placeholder:e.$i18n.get("instruction_select_a_status2"),"onUpdate:modelValue":function(e){return K.addToBulkEditionProcedures(e,"newValue",i)}},{default:(0,n.k6)((function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.$statusHelper.getStatuses().filter((function(e){return"trash"!=e.value})),(function(e,t){return(0,n.uX)(),(0,n.CE)("option",{key:t,value:e.slug},(0,n.v_)(e.name),9,y)})),128))]})),_:2},1032,["class","disabled","placeholder","onUpdate:modelValue"])):"author_id"==z.bulkEditionProcedures[i].metadatum.id?((0,n.uX)(),(0,n.Wv)(N,{key:2,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone,"hidden-select-arrow":z.bulkEditionProcedures[i].isDone},"tainacan-bulk-edition-field tainacan-bulk-edition-field-last"]),clearable:!z.bulkEditionProcedures[i].isDone,"clear-on-select":!1,data:z.users,placeholder:e.$i18n.get("instruction_type_search_users"),"keep-first":"","open-on-focus":"","append-to-body":!0,loading:z.isFetchingUsers,field:"name",icon:"account",disabled:z.bulkEditionProcedures[i].isDone,"check-infinite-scroll":"","onUpdate:modelValue":t[0]||(t[0]=function(e){return K.fetchUsersForAuthor(e)}),onFocusOnce:K.fetchMoreUsersForAuthor,onSelect:function(e){return K.addToBulkEditionProcedures(e.id,"newValue",i)},onInfiniteScroll:K.fetchMoreUsersForAuthor},(0,n.eX)({default:(0,n.k6)((function(e){return[(0,n.Lk)("div",E,[e.option.avatar_urls&&e.option.avatar_urls[24]?((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("img",{width:"24",src:e.option.avatar_urls[24]},null,8,P)])):(0,n.Q3)("",!0),(0,n.Lk)("div",_,(0,n.v_)(e.option.name),1)])]})),_:2},[z.isFetchingUsers?void 0:{name:"empty",fn:(0,n.k6)((function(){return[(0,n.eW)((0,n.v_)(e.$i18n.get("info_no_user_found")),1)]})),key:"0"}]),1032,["class","clearable","data","placeholder","loading","disabled","onFocusOnce","onSelect","onInfiniteScroll"])):"comments"==z.bulkEditionProcedures[i].metadatum.id?((0,n.uX)(),(0,n.Wv)(W,{key:3,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone,"hidden-select-arrow":z.bulkEditionProcedures[i].isDone},"tainacan-bulk-edition-field tainacan-bulk-edition-field-last"]),disabled:z.bulkEditionProcedures[i].isDone,placeholder:e.$i18n.get("instruction_select_a_comments_status"),"onUpdate:modelValue":function(e){return K.addToBulkEditionProcedures(e,"newValue",i)}},{default:(0,n.k6)((function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.$commentsStatusHelper.getStatuses(),(function(e,t){return(0,n.uX)(),(0,n.CE)("option",{key:t,value:e.slug},(0,n.v_)(e.name),9,I)})),128))]})),_:2},1032,["class","disabled","placeholder","onUpdate:modelValue"])):z.bulkEditionProcedures[i].action==z.editionActions.copy?((0,n.uX)(),(0,n.Wv)(W,{key:4,loading:z.metadataIsLoading,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone,"hidden-select-arrow":!!z.bulkEditionProcedures[i].metadatumIdCopyFrom},"tainacan-bulk-edition-field tainacan-bulk-edition-field-last"]),disabled:z.bulkEditionProcedures[i].isDone||z.bulkEditionProcedures[i].isExecuting&&!!z.bulkEditionProcedures[i].metadatumIdCopyFrom||z.metadataIsLoading,placeholder:e.$i18n.get("instruction_select_a_metadatum"),"onUpdate:modelValue":function(e){return K.addToBulkEditionProcedures(e,"metadatumIdCopyFrom",i)}},{default:(0,n.k6)((function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(K.getAllowedMetadataForCopy(i),(function(t,i){return(0,n.uX)(),(0,n.CE)(n.FK,{key:i},[t.id&&"tainacan-compound"!==t.metadata_type_object.component&&t.parent<=0?((0,n.uX)(),(0,n.CE)("option",{key:0,value:t.id},(0,n.v_)(t.name),9,C)):(0,n.Q3)("",!0),t.id&&"tainacan-compound"===t.metadata_type_object.component?((0,n.uX)(),(0,n.CE)("optgroup",{key:1,label:t.name},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.metadata_type_options.children_objects,(function(t,i){return(0,n.uX)(),(0,n.CE)(n.FK,{key:i},[e.childMetadatumForCopy.id?((0,n.uX)(),(0,n.CE)("option",{key:0,value:e.childMetadatumForCopy.id},(0,n.v_)(e.childMetadatumForCopy.name),9,x)):(0,n.Q3)("",!0)],64)})),128))],8,w)):(0,n.Q3)("",!0)],64)})),128)),z.bulkEditionProcedures[i].metadatum.metadata_type_object&&"tainacan-user"==z.bulkEditionProcedures[i].metadatum.metadata_type_object.component?((0,n.uX)(),(0,n.CE)("option",j,(0,n.v_)(e.$i18n.get("label_created_by")),1)):(0,n.Q3)("",!0)]})),_:2},1032,["loading","class","disabled","placeholder","onUpdate:modelValue"])):z.bulkEditionProcedures[i].action!=z.editionActions.clear?((0,n.uX)(),(0,n.Wv)((0,n.$y)(z.bulkEditionProcedures[i].metadatum.metadata_type_object.component),{key:5,"forced-component-type":z.bulkEditionProcedures[i].metadatum.metadata_type_object.component.includes("taxonomy")?"tainacan-taxonomy-tag-input":"","item-metadatum":{metadatum:z.bulkEditionProcedures[i].metadatum},"allow-new":!1,maxtags:1,class:(0,n.C4)([{"is-field-history":z.bulkEditionProcedures[i].isDone},"tainacan-bulk-edition-field tainacan-bulk-edition-field-last"]),disabled:z.bulkEditionProcedures[i].isDone||z.bulkEditionProcedures[i].isExecuting,"onUpdate:value":function(e){return K.addToBulkEditionProcedures(e,"newValue",i)}},null,40,["forced-component-type","item-metadatum","class","disabled","onUpdate:value"])):(0,n.Q3)("",!0)],64)):(0,n.Q3)("",!0)]})),_:2},1024),(0,n.Lk)("div",{style:(0,n.Tr)({marginRight:z.bulkEditionProcedures[i].isDone||z.bulkEditionProcedures[i].isExecuting?0:"-7.4px"}),class:"field bulk-last-field"},[z.bulkEditionProcedures[i].isDone||z.bulkEditionProcedures[i].isExecuting?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("button",{key:0,class:"button is-white is-pulled-right",onClick:function(e){return K.removeThis(i)}},[(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",V,t[5]||(t[5]=[(0,n.Lk)("i",{class:"has-text-gray4 tainacan-icon tainacan-icon-1-25em tainacan-icon-cancel"},null,-1)]))),[[G,{content:e.$i18n.get("remove_bulk_edit"),autoHide:!0,placement:"auto-end",popperClass:["tainacan-tooltip","tooltip"]}]])],8,S)),z.bulkEditionProcedures[i].isDone?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"is-pulled-right",onMouseover:function(e){return Object.assign(z.bulkEditionProcedures[i],{tooltipShow:!z.bulkEditionProcedures[i].tooltipShow})}},[(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",A,t[6]||(t[6]=[(0,n.Lk)("i",{class:"has-text-success tainacan-icon tainacan-icon-1-25em tainacan-icon-approvedcircle"},null,-1)]))),[[G,{content:e.$i18n.get("info_bulk_edit_process_added"),autoHide:!0,placement:"auto",popperClass:["tainacan-tooltip","tooltip"],triggers:[],show:z.bulkEditionProcedures[i].tooltipShow}]])],40,$)):(0,n.Q3)("",!0),!z.bulkEditionProcedures[i].isDone&&!z.bulkEditionProcedures[i].isExecuting&&z.bulkEditionProcedures[i].metadatum&&z.bulkEditionProcedures[i].action&&(z.bulkEditionProcedures[i].action!=z.editionActions.copy||z.bulkEditionProcedures[i].action==z.editionActions.copy&&z.bulkEditionProcedures[i].metadatumIdCopyFrom)?((0,n.uX)(),(0,n.CE)("button",{key:2,disabled:!z.groupId,class:"button is-white is-pulled-right",onClick:function(e){return K.executeBulkEditionProcedure(i)}},[(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",F,t[7]||(t[7]=[(0,n.Lk)("i",{class:"has-text-gray4 tainacan-icon tainacan-icon-1-25em tainacan-icon-play"},null,-1)]))),[[G,{content:e.$i18n.get("label_apply_changes"),autoHide:!0,placement:"auto-end",popperClass:["tainacan-tooltip","tooltip"]}]])],8,X)):(0,n.Q3)("",!0),z.bulkEditionProcedures[i].isExecuting?((0,n.uX)(),(0,n.CE)("div",O,t[8]||(t[8]=[(0,n.Lk)("button",{class:"button is-white is-loading"},null,-1)]))):(0,n.Q3)("",!0)],4)])})),128))]})),_:1}),(0,n.Lk)("a",{disabled:!1===z.dones.every((function(e){return!0===e})),class:"has-text-right is-inline-block add-link",onClick:t[1]||(t[1]=function(e){return K.addEditionCriterion()})},[t[9]||(t[9]=(0,n.Lk)("span",{class:"icon is-small"},[(0,n.Lk)("i",{class:"tainacan-icon has-text-secondary tainacan-icon-add"})],-1)),(0,n.eW)("  "+(0,n.v_)(e.$i18n.get("new_bulk_edit_criterion")),1)],8,L)]),(0,n.Lk)("footer",U,[(0,n.Lk)("p",B,[(0,n.Lk)("button",{disabled:Object.keys(z.bulkEditionProcedures).length&&z.bulkEditionProcedures[z.editionCriteria[z.editionCriteria.length-1]].isExecuting||!1,type:"button",class:"button is-outlined",onClick:t[2]||(t[2]=function(t){e.$eventBusSearch.loadItems(),e.$emit("close")})},(0,n.v_)(e.$i18n.get("close")),9,T)]),(0,n.Lk)("p",D,[(0,n.Lk)("button",{disabled:!1===z.dones.every((function(e){return!0===e})),class:"button is-success",type:"button",onClick:t[3]||(t[3]=function(t){e.$emitter.emit("openProcessesPopup"),e.$eventBusSearch.loadItems(),e.$emit("close")})},(0,n.v_)(e.$i18n.get("finish")),9,M)])])])],512)}},54978:(e,t,i)=>{i.d(t,{A:()=>l});var n=i(31601),a=i.n(n),o=i(76314),d=i.n(o)()(a());d.push([e.id,"@media screen and (max-width: 768px){.tainacan-bulk-edition-inline-fields{flex-direction:column !important}.tainacan-bulk-edition-inline-fields .tainacan-bulk-edition-field:not(:first-child){padding-left:0 !important}.tainacan-bulk-edition-inline-fields .bulk-last-field{margin-left:0 !important;justify-content:center !important}}.this-tainacan-modal-content{min-height:300px}.this-tainacan-modal-content .button.is-white.is-loading{cursor:inherit;color:var(--tainacan-gray4) !important}.this-tainacan-modal-content .is-pulled-right .is-success{background-color:transparent !important}.this-tainacan-modal-content .add-link{font-size:0.875em}.this-tainacan-modal-content .form-submit{padding:42px 0 0.4em 0 !important}.no-overflow-modal-card-body{padding:0 !important;overflow:unset !important}.tainacan-total-objects-info{font-size:0.75em;font-weight:normal}.tainacan-by-text{max-width:28px}.tainacan-bulk-edition-inline-fields{display:inline-flex;flex-direction:row;flex-wrap:wrap;width:100%}.tainacan-bulk-edition-inline-fields .control .select{width:100% !important}.tainacan-bulk-edition-inline-fields .control .select select{width:100% !important}.tainacan-bulk-edition-inline-fields .taginput-container{height:32px !important}.tainacan-bulk-edition-inline-fields .taginput-container .tags{margin-bottom:calc(0.275em - 1px) !important}.tainacan-bulk-edition-inline-fields .taginput-container .tags .tag{height:2em !important;padding-left:0.75em !important;padding-right:0.75em !important;margin-right:0 !important}.tainacan-bulk-edition-inline-fields .taginput-container .icon{height:28px !important}.tainacan-bulk-edition-inline-fields .is-field-history .input[disabled],.tainacan-bulk-edition-inline-fields .is-field-history .taginput [disabled].taginput-container.is-focusable,.tainacan-bulk-edition-inline-fields .is-field-history .textarea[disabled]{color:var(--tainacan-black) !important;border:none !important;background-color:var(--tainacan-input-background-color) !important}.tainacan-bulk-edition-inline-fields .is-field-history .taginput-container .tags{color:var(--tainacan-black) !important;background-color:var(--tainacan-white) !important;border:none !important}.tainacan-bulk-edition-inline-fields .is-field-history .taginput-container .tags .tag.is-delete{display:none !important}.tainacan-bulk-edition-inline-fields .is-field-history .taginput-container .tags .tag{max-width:100% !important}.tainacan-bulk-edition-inline-fields .is-field-history .taginput-container .tags:hover,.tainacan-bulk-edition-inline-fields .is-field-history .taginput-container .tags .tag{background-color:var(--tainacan-white) !important}.tainacan-bulk-edition-inline-fields .is-field-history .taginput-container .icon{display:none !important}.tainacan-bulk-edition-inline-fields .is-field-history input{color:var(--tainacan-black) !important;border:none !important;background-color:var(--tainacan-white) !important}.tainacan-bulk-edition-inline-fields .is-field-history textarea{color:var(--tainacan-black) !important;border:none !important;background-color:var(--tainacan-white) !important;min-height:auto !important;line-height:1.5em}.tainacan-bulk-edition-inline-fields .is-field-history .select:after{display:none !important}.tainacan-bulk-edition-inline-fields .is-field-history .select select{border:none !important}.tainacan-bulk-edition-inline-fields .tainacan-bulk-edition-field{flex-direction:column;flex-grow:1;flex-shrink:1;text-align:center;padding-bottom:9px;flex-basis:10%}.tainacan-bulk-edition-inline-fields .tainacan-bulk-edition-field:not(:first-child){padding-left:13px}.tainacan-bulk-edition-inline-fields .tainacan-bulk-edition-field :deep(.is-special-hidden-for-mobile),.tainacan-bulk-edition-inline-fields .tainacan-bulk-edition-field :deep(.is-special-hidden-for-mobile):focus,.tainacan-bulk-edition-inline-fields .tainacan-bulk-edition-field :deep(.is-special-hidden-for-mobile):focus-visible{opacity:0;width:0;height:0 !important;min-height:0;min-width:0;padding:0 !important;line-height:0px !important;border:none !important;border-color:transparent !important;border-width:0px !important;font-size:0px !important;display:block !important}.tainacan-bulk-edition-inline-fields .bulk-last-field{display:flex;align-items:center;height:32px;margin-left:10px;flex-direction:row-reverse}.tainacan-bulk-edition-inline-fields .bulk-last-field .icon.has-text-gray4:hover{color:var(--tainacan-heading-color) !important}.tainacan-add-edition-criterion-button{font-size:0.75em;color:var(--tainacan-turquoise5)}.tainacan-add-edition-criterion-button-disabled{cursor:not-allowed !important}\n",""]);const l=d},13195:(e,t,i)=>{var n=i(85072),a=i.n(n),o=i(97825),d=i.n(o),l=i(77659),r=i.n(l),u=i(55056),s=i.n(u),c=i(10540),m=i.n(c),p=i(63494),b=i.n(p),h=i(54978),f={};f.styleTagTransform=b(),f.setAttributes=s(),f.insert=r().bind(null,"head"),f.domAPI=d(),f.insertStyleElement=m();a()(h.A,f),h.A&&h.A.locals&&h.A.locals},19741:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var n=i(6104),a=i(75370);i(41070);const o=(0,i(66262).A)(a.A,[["render",n.X]])},75370:(e,t,i)=>{i.d(t,{A:()=>n.A});var n=i(27493)},6104:(e,t,i)=>{i.d(t,{X:()=>n.X});var n=i(87919)},41070:(e,t,i)=>{i(13195)}}]);